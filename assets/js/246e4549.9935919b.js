"use strict";(self.webpackChunknblocks_docs=self.webpackChunknblocks_docs||[]).push([[8701],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>h});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var i=a.createContext({}),c=function(e){var t=a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=c(e.components);return a.createElement(i.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,i=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=c(n),h=o,m=d["".concat(i,".").concat(h)]||d[h]||p[h]||r;return n?a.createElement(m,l(l({ref:t},u),{},{components:n})):a.createElement(m,l({ref:t},u))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,l=new Array(r);l[0]=d;var s={};for(var i in t)hasOwnProperty.call(t,i)&&(s[i]=t[i]);s.originalType=e,s.mdxType="string"==typeof e?e:o,l[1]=s;for(var c=2;c<r;c++)l[c]=n[c];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},5162:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(7294),o=n(6010);const r="tabItem_Ymn6";function l(e){let{children:t,hidden:n,className:l}=e;return a.createElement("div",{role:"tabpanel",className:(0,o.Z)(r,l),hidden:n},t)}},4866:(e,t,n)=>{n.d(t,{Z:()=>N});var a=n(7462),o=n(7294),r=n(6010),l=n(2466),s=n(6550),i=n(1980),c=n(7392),u=n(12);function p(e){return function(e){return o.Children.map(e,(e=>{if(!e||(0,o.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:n,attributes:a,default:o}}=e;return{value:t,label:n,attributes:a,default:o}}))}function d(e){const{values:t,children:n}=e;return(0,o.useMemo)((()=>{const e=t??p(n);return function(e){const t=(0,c.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function h(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function m(e){let{queryString:t=!1,groupId:n}=e;const a=(0,s.k6)(),r=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,i._X)(r),(0,o.useCallback)((e=>{if(!r)return;const t=new URLSearchParams(a.location.search);t.set(r,e),a.replace({...a.location,search:t.toString()})}),[r,a])]}function k(e){const{defaultValue:t,queryString:n=!1,groupId:a}=e,r=d(e),[l,s]=(0,o.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!h({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const a=n.find((e=>e.default))??n[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:r}))),[i,c]=m({queryString:n,groupId:a}),[p,k]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[a,r]=(0,u.Nk)(n);return[a,(0,o.useCallback)((e=>{n&&r.set(e)}),[n,r])]}({groupId:a}),g=(()=>{const e=i??p;return h({value:e,tabValues:r})?e:null})();(0,o.useLayoutEffect)((()=>{g&&s(g)}),[g]);return{selectedValue:l,selectValue:(0,o.useCallback)((e=>{if(!h({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);s(e),c(e),k(e)}),[c,k,r]),tabValues:r}}var g=n(2389);const b="tabList__CuJ",f="tabItem_LNqP";function y(e){let{className:t,block:n,selectedValue:s,selectValue:i,tabValues:c}=e;const u=[],{blockElementScrollPositionUntilNextRender:p}=(0,l.o5)(),d=e=>{const t=e.currentTarget,n=u.indexOf(t),a=c[n].value;a!==s&&(p(t),i(a))},h=e=>{let t=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const n=u.indexOf(e.currentTarget)+1;t=u[n]??u[0];break}case"ArrowLeft":{const n=u.indexOf(e.currentTarget)-1;t=u[n]??u[u.length-1];break}}t?.focus()};return o.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":n},t)},c.map((e=>{let{value:t,label:n,attributes:l}=e;return o.createElement("li",(0,a.Z)({role:"tab",tabIndex:s===t?0:-1,"aria-selected":s===t,key:t,ref:e=>u.push(e),onKeyDown:h,onClick:d},l,{className:(0,r.Z)("tabs__item",f,l?.className,{"tabs__item--active":s===t})}),n??t)})))}function v(e){let{lazy:t,children:n,selectedValue:a}=e;const r=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=r.find((e=>e.props.value===a));return e?(0,o.cloneElement)(e,{className:"margin-top--md"}):null}return o.createElement("div",{className:"margin-top--md"},r.map(((e,t)=>(0,o.cloneElement)(e,{key:t,hidden:e.props.value!==a}))))}function w(e){const t=k(e);return o.createElement("div",{className:(0,r.Z)("tabs-container",b)},o.createElement(y,(0,a.Z)({},e,t)),o.createElement(v,(0,a.Z)({},e,t)))}function N(e){const t=(0,g.Z)();return o.createElement(w,(0,a.Z)({key:String(t)},e))}},4498:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>u,default:()=>k,frontMatter:()=>c,metadata:()=>p,toc:()=>h});var a=n(7462),o=(n(7294),n(3905)),r=n(4866),l=n(5162);const s={toc:[]};function i(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,a.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"If you cannot find your stack in the example code you need to integrate this part manually."),(0,o.kt)("p",null,"Nblocks can be integrated with any stack or framework. Essentially it's all about REST API calls or redirecting the user browser agent which is documented in more details in the API reference ",(0,o.kt)("a",{parentName:"p",href:"https://nebulr-group.github.io/nblocks-api-docs"},"API reference"),"."),(0,o.kt)("p",null,"Use the other code examples to understand what should to be done and in what order."),(0,o.kt)("p",null,"We'd be happy to get feedback so we can add more code examples so don't forget to make a request, by joining our ",(0,o.kt)("a",{parentName:"p",href:"https://discord.gg/kjWYdZ6f6G"},"Discord")," and spell it out."))}i.isMDXComponent=!0;const c={sidebar_position:1,sidebar_label:"Quickstart Payments"},u="Quickstart Payments",p={unversionedId:"payments/quickstart-payments",id:"payments/quickstart-payments",title:"Quickstart Payments",description:"On this page you will integrate your web application with Nblocks Payments.",source:"@site/docs/04-payments/quickstart-payments.mdx",sourceDirName:"04-payments",slug:"/payments/quickstart-payments",permalink:"/nblocks-docs/docs/payments/quickstart-payments",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,sidebar_label:"Quickstart Payments"},sidebar:"tutorialSidebar",previous:{title:"Quickstart Feature Flags",permalink:"/nblocks-docs/docs/Feature-flags/quickstart-feature-flags"},next:{title:"Quickstart Microsoft marketplace",permalink:"/nblocks-docs/docs/payments/quickstart-microsoft-commercial-marketplace"}},d={},h=[{value:"Integrating in your code",id:"integrating-in-your-code",level:2},{value:"Step 1. Create subscription button",id:"step-1-create-subscription-button",level:3},{value:"Example code",id:"example-code",level:5},{value:"Step 2. Improved callback",id:"step-2-improved-callback",level:3},{value:"Example code",id:"example-code-1",level:5},{value:"Create plans in Nblocks Admin",id:"create-plans-in-nblocks-admin",level:2},{value:"Step 1. Create a premium plan",id:"step-1-create-a-premium-plan",level:3},{value:"Step 2. Enable syncing with Stripe",id:"step-2-enable-syncing-with-stripe",level:3},{value:"Test signing up and subscribe to a plan",id:"test-signing-up-and-subscribe-to-a-plan",level:2},{value:"1. Start your app",id:"1-start-your-app",level:3},{value:"2. Navigate to /login and get redirected to Nblocks Login to signup",id:"2-navigate-to-login-and-get-redirected-to-nblocks-login-to-signup",level:3},{value:"3. Select plan",id:"3-select-plan",level:3},{value:"4. Enter payment information",id:"4-enter-payment-information",level:3},{value:"5. Return to the app",id:"5-return-to-the-app",level:3}],m={toc:h};function k(e){let{components:t,...s}=e;return(0,o.kt)("wrapper",(0,a.Z)({},m,s,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"quickstart-payments"},"Quickstart Payments"),(0,o.kt)("p",null,"On this page you will integrate your web application with Nblocks Payments.\nThis allows you add a paywall and start recieving money through subscriptions from your customers in matter of minutes."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"The content of this quickstart")),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"First we'll go through how you will apply a few lines of code to setup your app for paying users."),(0,o.kt)("li",{parentName:"ol"},"Secondly, we'll define a simple business model with plans and prices via Nblocks Admin and enable syncing with Stripe."),(0,o.kt)("li",{parentName:"ol"},"Lastly we'll be testing this by signing up as a new user where we will selecting a plan and get access to your app.")),(0,o.kt)("admonition",{title:"Prerequisites",type:"info"},(0,o.kt)("ol",{parentName:"admonition"},(0,o.kt)("li",{parentName:"ol"},"If you haven't already, ",(0,o.kt)("a",{parentName:"li",href:"/docs/getting-started/signup"},"sign up")," for Nblocks and get access to your ",(0,o.kt)("a",{parentName:"li",href:"/docs/getting-started/id-and-keys"},"app id")),(0,o.kt)("li",{parentName:"ol"},"Completed the ",(0,o.kt)("a",{parentName:"li",href:"/docs/authentication-and-access/quickstart-user-ready"},"Quickstart User Ready")," since we'll be evolving on the token callback handler in this quickstart"))),(0,o.kt)("h2",{id:"integrating-in-your-code"},"Integrating in your code"),(0,o.kt)("h3",{id:"step-1-create-subscription-button"},"Step 1. Create subscription button"),(0,o.kt)("p",null,"In this step we will coding a button and component that will redirect the user to the Nblocks hosted Select plan view to manage can manage their current plan and subscription."),(0,o.kt)("p",null,"There will be two Nblocks endpoints involved when requesting to render the select plan."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"First we need to get the ",(0,o.kt)("a",{parentName:"li",href:"https://nebulr-group.github.io/nblocks-api-docs/#handover-code"},"handover code")," which is unique to the user. This is done using ",(0,o.kt)("inlineCode",{parentName:"li"},"/handover/code")," endpoint."),(0,o.kt)("li",{parentName:"ol"},"Then we will use the code to redirect to the ",(0,o.kt)("a",{parentName:"li",href:"https://nebulr-group.github.io/nblocks-api-docs/#subscription-portal-select-plan"},"select plan view")," using the ",(0,o.kt)("inlineCode",{parentName:"li"},"/subscription-portal/selectPlan")," endpoint.")),(0,o.kt)("h5",{id:"example-code"},"Example code"),(0,o.kt)(r.Z,{mdxType:"Tabs"},(0,o.kt)(l.Z,{value:"reactjs",label:"ReactJS",default:!0,mdxType:"TabItem"},(0,o.kt)("p",null,"Create a new component ",(0,o.kt)("inlineCode",{parentName:"p"},"SelectPlan"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},'import React, { useEffect } from "react";\nimport { APPLICATION_ID, NBLOCKS_AUTH, NBLOCKS_BACKENDLESS } from "../nblocks/Globals";\n\nfunction SelectPlan() {\n  const redirectToSelectPlan = async (accessToken) => {\n\n    // Replace this with your own APP ID\n    const APP_ID = "XXX";\n\n    // Make the API call to Nblocks\n    const handoverCodeResult = await fetch(`https://auth-stage.nblocks.cloud/handover/code/${APP_ID}`,\n      {\n        method: "POST",\n        headers: {\n          "Content-Type": "application/json",\n        },\n        body: JSON.stringify({\n          accessToken,\n        }),\n      }\n    ).then(res => res.json());\n    \n    if(handoverCodeResult.code) {\n      // Redirect to Nblocks Payments\n      window.location.replace(`https://backendless-stage.nblocks.cloud/subscription-portal/selectPlan?code=${handoverCodeResult.code}`); \n    }\n  };\n\n  useEffect(() => {\n    const accessToken = window.localStorage.getItem(\'access_token\');\n    if (accessToken) {\n      redirectToSelectPlan(accessToken);\n    }\n  }, [])\n\n  return <div>Loading...</div>\n}\n\nexport { SelectPlan }\n')),(0,o.kt)("p",null,"Add this component to render on the route ",(0,o.kt)("inlineCode",{parentName:"p"},"/selectPlan")," and create a subscription button that navigates the user to this route."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},'<sidebar>\n  <ul class="menu">\n      <li>\n          <a href="/home">Home</a>\n      </li>\n      <li>\n          // highlight-start\n          <a href="/selectPlan">Subscription</a>\n          // highlight-end\n      </li>\n  </ul>\n</sidebar>\n')),(0,o.kt)("p",null,"Great! When you render this component the user will be redirected to select plan view. ")),(0,o.kt)(l.Z,{value:"pseudo",label:"Can't find your stack?",default:!0,mdxType:"TabItem"},(0,o.kt)(i,{mdxType:"PseudoCode"}))),(0,o.kt)("h3",{id:"step-2-improved-callback"},"Step 2. Improved callback"),(0,o.kt)("p",null,"This part is very simple and we're going to add a few lines of conditional code to the way you obtained the user tokens in ",(0,o.kt)("a",{parentName:"p",href:"/docs/authentication-and-access/quickstart-user-ready"},"Quickstart User Ready"),"."),(0,o.kt)("p",null,"The tokens will contain payment information and we can easily redirect to the Select plan view should they tell us to."),(0,o.kt)("h5",{id:"example-code-1"},"Example code"),(0,o.kt)(r.Z,{mdxType:"Tabs"},(0,o.kt)(l.Z,{value:"reactjs",label:"ReactJS",default:!0,mdxType:"TabItem"},(0,o.kt)("p",null,"Here we evolve on the CallbackComponent we created in the step before. The new additions has been highlighted."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},'import { useEffect, useState } from "react";\nimport { useLocation } from \'react-router-dom\';\nimport { jwtVerify, createRemoteJWKSet } from "jose";\n\n// Users will get back to this component after finishing login\nexport default function CallbackComponent() {\n\n  const location = useLocation();\n  const urlSearch = new URLSearchParams(location.search);\n  const code = urlSearch.get("code");\n\n  const APP_ID = "XXX";\n\n  const [accessToken, setAccessToken] = useState();\n\n  useEffect(() => {\n    if (code) {\n      handleCallback(code);\n    }\n  }, [code]);\n\n  const handleCallback = async (code) => {\n    // Make the API call to Nblocks\n    const result = await fetch(`https://auth-stage.nblocks.cloud/token/code/${APP_ID}`,\n      {\n        method: "POST",\n        headers: {\n          "Content-Type": "application/json",\n        },\n        body: JSON.stringify({\n          code: code,\n        }),\n      }\n    ).then(res => res.json());\n\n    // Verify the result using public keys from Nblocks JWKS\n    const { access_token, refresh_token, id_token } = tokens;\n    const { payload } = await jwtVerify(\n      access_token, createRemoteJWKSet(\n          new URL(\'https://auth-stage.nblocks.cloud/.well-known/jwks.json\')\n      ), { issuer: \'https://auth-stage.nblocks.cloud\' }\n    );\n\n    // Store the result in component state and localstorage\n    setAccessToken(payload);\n    window.localStorage.setItem(\'access_token\', access_token);\n    window.localStorage.setItem(\'refresh_token\', refresh_token);\n    window.localStorage.setItem(\'id_token\', id_token);\n  };\n\n// highlight-start\n  if (accessToken)\n    if (\n        accessToken.shouldSelectPlan || \n        accessToken.shouldSetupPayments\n    )\n      return (<Navigate to={"/selectPlan"}/>);\n    else\n      return (<Navigate to={"/"}/>);\n  else\n    return (<p>Not logged in</p>);\n    // highlight-end\n}\n'))),(0,o.kt)(l.Z,{value:"nextjs",label:"NextJS",default:!0,mdxType:"TabItem"},(0,o.kt)("p",null,"Here we evolve on the Callback page we created in the step before. The new additions has been highlighted."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx",metastring:"title=/app/auth/oauth-callback/page.jsx",title:"/app/auth/oauth-callback/page.jsx"},'\'use client\'\n\nimport { useSearchParams } from "next/navigation";\nimport { useEffect, useState } from "react";\n\n// Users will get back to this component after finishing login\nexport default function Callback() {\n\n  const searchParams = useSearchParams();\n\n  const APP_ID = "XXX";\n\n  const [tokens, setTokens] = useState();\n\n  useEffect(() => {\n    const code = searchParams.get(\'code\');\n    if (code) {\n      handleCallback(code);\n    }\n  }, [searchParams]);\n\n  const handleCallback = async (code) => {\n    // Make the API call to Nblocks\n    const result = await fetch(`https://auth-stage.nblocks.cloud/token/code/${APP_ID}`,\n      {\n        method: "POST",\n        headers: {\n          "Content-Type": "application/json",\n        },\n        body: JSON.stringify({\n          code: code,\n        }),\n      }\n    ).then(res => res.json());\n\n    // Store the result in component state and localstorage\n    setTokens(result);\n\n    window.localStorage.setItem(\'access_token\', result.access_token);\n  };\n\n  if (tokens)\n    return (<p>Hello {tokens.user_profile.name}</p>);\n  else\n    return (<p>Not logged in</p>);\n}\n'))),(0,o.kt)(l.Z,{value:"angular",label:"Angular",default:!0,mdxType:"TabItem"},(0,o.kt)("p",null,"Here we evolve on the CallbackComponent we created in the step before. The new additions has been highlighted."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"@Component({\n  template: '<div><p *ngIf=\"!tokens\">Not logged in</p><p *ngIf=\"tokens\">Hello {{tokens.user_profile.name}}</p></div>',\n})\n\nexport class CallbackComponent {\n\n  private APP_ID = \"XXX\";\n\n  private tokens: any;\n\n  constructor(\n    private route: ActivatedRouteSnapshot,\n    private http: HttpClient,\n  ) {\n    this.handleCallback(this.route.queryParams['code'])\n  }\n\n  private handleCallback(code: string) {\n    // Make the API call to Nblocks\n    this.http.post(`https://auth-stage.nblocks.cloud/token/code/${this.APP_ID}`, {\n      code: code\n    }).subscribe((response) => {\n      // Store the result in component state and localstorage\n      this.tokens = response;\n      window.localStorage.setItem('access_token', result.access_token);\n    });\n  }\n}\n\n"))),(0,o.kt)(l.Z,{value:"pseudo",label:"Can't find your stack?",default:!0,mdxType:"TabItem"},(0,o.kt)("p",null,"If you cannot find your stack in the example code you need to integrate this part manually."),(0,o.kt)("p",null,"Essentially you should make a call to the ",(0,o.kt)("inlineCode",{parentName:"p"},"/token/code")," endpoint described in the ",(0,o.kt)("a",{parentName:"p",href:"https://nebulr-group.github.io/nblocks-api-docs/#shorthand-get-tokens"},"API reference"),"."),(0,o.kt)("p",null,"Don't forget to make a request, by joining our ",(0,o.kt)("a",{parentName:"p",href:"https://discord.gg/kjWYdZ6f6G"},"Discord")," and spell it out, and we'll be happy to add this stack as an example."))),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"Nblocks will attach payment information to the access token you recieve on the callback router.\nIf ",(0,o.kt)("inlineCode",{parentName:"p"},"shouldSelectPlan")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"shouldSetupPayments")," is set to ",(0,o.kt)("inlineCode",{parentName:"p"},"true")," you should redirect the user to ",(0,o.kt)("inlineCode",{parentName:"p"},"/selectPlan"),".")),(0,o.kt)("h2",{id:"create-plans-in-nblocks-admin"},"Create plans in Nblocks Admin"),(0,o.kt)("p",null,"When signing up for Nblocks you also got access to Nblocks Admin where you can customize and make changes to your app configuration and access other features."),(0,o.kt)("p",null,"Go to ",(0,o.kt)("a",{parentName:"p",href:"https://admin-stage.nblocks.cloud"},"Nblocks Admin")," and login."),(0,o.kt)("p",null,"In this part we'll be creating a feature flag that matches your flag ID in code and define who should have access to it"),(0,o.kt)("h3",{id:"step-1-create-a-premium-plan"},"Step 1. Create a premium plan"),(0,o.kt)("p",null,'Click the payments tab and create a new plan. Call it "Premium", keep free trial disabled and give it a price of 50 EUR a month. We\'ll subscribe to this plan when we test the integration.'),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Create premium plan",src:n(1627).Z,width:"3456",height:"1992"})),(0,o.kt)("p",null,"Now when we have the plans ready, it's time to start enable the Stripe integration so that we can charge credit cards and handle invoicing. "),(0,o.kt)("h3",{id:"step-2-enable-syncing-with-stripe"},"Step 2. Enable syncing with Stripe"),(0,o.kt)("p",null,"Nblocks uses ",(0,o.kt)("a",{parentName:"p",href:"https://stripe.com"},"Stripe")," as the payment provider to facilitate credit card, invoice, wallet and bank transfer payments."),(0,o.kt)("p",null,'Click the "Providers" tab and click to enable Stripe as a provider. Nblocks will ask for your Stripe Publishable key and Secret key.'),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Enable Stripe",src:n(8013).Z,width:"3456",height:"1991"})),(0,o.kt)("p",null,"If you don't have a Stripe account already, go to ",(0,o.kt)("a",{parentName:"p",href:"https://stripe.com"},"https://stripe.com")," and register for a new one."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Create stripe account",src:n(7788).Z,width:"2974",height:"1532"})),(0,o.kt)("p",null,"Inside the Stripe dashboard, navigate to ",(0,o.kt)("a",{parentName:"p",href:"https://dashboard.stripe.com/test/apikeys"},"test API keys"),' by clicking the "Developers" button and then "API keys", making sure "Test mode" is enabled.'),(0,o.kt)("admonition",{title:"Why test API keys?",type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"With the test keys, we'll be able to add a non existing test credit card and simulate a successful payment when subscribing to your Premium plan.")),(0,o.kt)("p",null,'Under "Standard keys" you\'ll find your Publishable key and Secret key. Add them to the Nblocks input and click Save.'),(0,o.kt)("p",null,"Nblocks will now create the required information in your stripe account to enable payments and keep this information in-sync as long as you have the integration enabled."),(0,o.kt)("h2",{id:"test-signing-up-and-subscribe-to-a-plan"},"Test signing up and subscribe to a plan"),(0,o.kt)("p",null,"It's time to see this in action."),(0,o.kt)("h3",{id:"1-start-your-app"},"1. Start your app"),(0,o.kt)("p",null,"Start your application so that it is accessible on ",(0,o.kt)("a",{parentName:"p",href:"http://localhost:8080"},"http://localhost:8080")),(0,o.kt)("h3",{id:"2-navigate-to-login-and-get-redirected-to-nblocks-login-to-signup"},"2. Navigate to /login and get redirected to Nblocks Login to signup"),(0,o.kt)("p",null,"Navigate to ",(0,o.kt)("a",{parentName:"p",href:"http://localhost:8080/login"},"http://localhost:8080/login"),". Your code redirects the user to Nblocks Login.\nOr you can go directly to ",(0,o.kt)("a",{parentName:"p",href:"https://auth-stage.nblocks.cloud/signup/APP_ID"},"https://auth-stage.nblocks.cloud/signup/APP_ID")," where APP_ID is your Nblocks app id to start a signup flow."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Nblocks Sign up",src:n(7319).Z,width:"3456",height:"2159"})),(0,o.kt)("h3",{id:"3-select-plan"},"3. Select plan"),(0,o.kt)("p",null,"After signing up you're immediately redirected to Select plan that shows you're about to subscribe to the Premium plan."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Select plan scree",src:n(4091).Z,width:"3456",height:"1990"})),(0,o.kt)("p",null,"Click to continue with the Premium plan and enter your credit card information."),(0,o.kt)("h3",{id:"4-enter-payment-information"},"4. Enter payment information"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Stripe checkout",src:n(1952).Z,width:"3456",height:"1991"})),(0,o.kt)("admonition",{title:"Use the test credit card",type:"tip"},(0,o.kt)("table",{parentName:"admonition"},(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null}),(0,o.kt)("th",{parentName:"tr",align:null}),(0,o.kt)("th",{parentName:"tr",align:null}),(0,o.kt)("th",{parentName:"tr",align:null}),(0,o.kt)("th",{parentName:"tr",align:null}),(0,o.kt)("th",{parentName:"tr",align:null}),(0,o.kt)("th",{parentName:"tr",align:null}),(0,o.kt)("th",{parentName:"tr",align:null}))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Number"),(0,o.kt)("td",{parentName:"tr",align:null},"4242 4242 4242 4242"),(0,o.kt)("td",{parentName:"tr",align:null}),(0,o.kt)("td",{parentName:"tr",align:null},"Expires"),(0,o.kt)("td",{parentName:"tr",align:null},"12/45"),(0,o.kt)("td",{parentName:"tr",align:null}),(0,o.kt)("td",{parentName:"tr",align:null},"CVC"),(0,o.kt)("td",{parentName:"tr",align:null},"123"))))),(0,o.kt)("h3",{id:"5-return-to-the-app"},"5. Return to the app"),(0,o.kt)("p",null,"After a succesfull checkout you're redirected back to the app and your subscribing to Premium for 50 Eur / month."))}k.isMDXComponent=!0},7319:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/signup-screen-79bb061efeb9d1ee9f93e793ab5db9f9.png"},8013:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/connect-to-stripe-23ab4a1aac9c4975fd63498e7deb9ff5.png"},1627:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/create-premium-plan-f74d6c3eda64a3e794a83df913e2af91.png"},7788:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/create-stripe-account-d696e6ee0881d42c778a218199e6c443.png"},4091:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/select-plan-screen-6c9a9e04731122b9699990ad352e2c71.png"},1952:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/stripe-checkout-a3ceef39e408fad497b10917e3304d30.png"}}]);