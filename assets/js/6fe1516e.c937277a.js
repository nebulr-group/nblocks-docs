"use strict";(self.webpackChunknblocks_docs=self.webpackChunknblocks_docs||[]).push([[301],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>h});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},u=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),d=c(n),h=o,k=d["".concat(l,".").concat(h)]||d[h]||p[h]||r;return n?a.createElement(k,s(s({ref:t},u),{},{components:n})):a.createElement(k,s({ref:t},u))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,s=new Array(r);s[0]=d;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:o,s[1]=i;for(var c=2;c<r;c++)s[c]=n[c];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},5162:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(7294),o=n(6010);const r="tabItem_Ymn6";function s(e){let{children:t,hidden:n,className:s}=e;return a.createElement("div",{role:"tabpanel",className:(0,o.Z)(r,s),hidden:n},t)}},4866:(e,t,n)=>{n.d(t,{Z:()=>N});var a=n(7462),o=n(7294),r=n(6010),s=n(2466),i=n(6550),l=n(1980),c=n(7392),u=n(12);function p(e){return function(e){return o.Children.map(e,(e=>{if(!e||(0,o.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:n,attributes:a,default:o}}=e;return{value:t,label:n,attributes:a,default:o}}))}function d(e){const{values:t,children:n}=e;return(0,o.useMemo)((()=>{const e=t??p(n);return function(e){const t=(0,c.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function h(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function k(e){let{queryString:t=!1,groupId:n}=e;const a=(0,i.k6)(),r=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,l._X)(r),(0,o.useCallback)((e=>{if(!r)return;const t=new URLSearchParams(a.location.search);t.set(r,e),a.replace({...a.location,search:t.toString()})}),[r,a])]}function m(e){const{defaultValue:t,queryString:n=!1,groupId:a}=e,r=d(e),[s,i]=(0,o.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!h({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const a=n.find((e=>e.default))??n[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:r}))),[l,c]=k({queryString:n,groupId:a}),[p,m]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[a,r]=(0,u.Nk)(n);return[a,(0,o.useCallback)((e=>{n&&r.set(e)}),[n,r])]}({groupId:a}),g=(()=>{const e=l??p;return h({value:e,tabValues:r})?e:null})();(0,o.useLayoutEffect)((()=>{g&&i(g)}),[g]);return{selectedValue:s,selectValue:(0,o.useCallback)((e=>{if(!h({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);i(e),c(e),m(e)}),[c,m,r]),tabValues:r}}var g=n(2389);const f="tabList__CuJ",b="tabItem_LNqP";function y(e){let{className:t,block:n,selectedValue:i,selectValue:l,tabValues:c}=e;const u=[],{blockElementScrollPositionUntilNextRender:p}=(0,s.o5)(),d=e=>{const t=e.currentTarget,n=u.indexOf(t),a=c[n].value;a!==i&&(p(t),l(a))},h=e=>{let t=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const n=u.indexOf(e.currentTarget)+1;t=u[n]??u[0];break}case"ArrowLeft":{const n=u.indexOf(e.currentTarget)-1;t=u[n]??u[u.length-1];break}}t?.focus()};return o.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":n},t)},c.map((e=>{let{value:t,label:n,attributes:s}=e;return o.createElement("li",(0,a.Z)({role:"tab",tabIndex:i===t?0:-1,"aria-selected":i===t,key:t,ref:e=>u.push(e),onKeyDown:h,onClick:d},s,{className:(0,r.Z)("tabs__item",b,s?.className,{"tabs__item--active":i===t})}),n??t)})))}function w(e){let{lazy:t,children:n,selectedValue:a}=e;const r=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=r.find((e=>e.props.value===a));return e?(0,o.cloneElement)(e,{className:"margin-top--md"}):null}return o.createElement("div",{className:"margin-top--md"},r.map(((e,t)=>(0,o.cloneElement)(e,{key:t,hidden:e.props.value!==a}))))}function v(e){const t=m(e);return o.createElement("div",{className:(0,r.Z)("tabs-container",f)},o.createElement(y,(0,a.Z)({},e,t)),o.createElement(w,(0,a.Z)({},e,t)))}function N(e){const t=(0,g.Z)();return o.createElement(v,(0,a.Z)({key:String(t)},e))}},1787:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>c,default:()=>k,frontMatter:()=>l,metadata:()=>u,toc:()=>d});var a=n(7462),o=(n(7294),n(3905)),r=n(4866),s=n(5162),i=n(8669);const l={sidebar_position:3,sidebar_label:"Quickstart",tags:["tutorial","quickstart"]},c="Quickstart",u={unversionedId:"getting-started/quickstart",id:"getting-started/quickstart",title:"Quickstart",description:"On this page you will integrate your web application with Nblocks to get login, signup, plans and payments functionality for your users out of the box. We call this being user ready and you will accomplish this in no time.",source:"@site/docs/01-getting-started/quickstart.mdx",sourceDirName:"01-getting-started",slug:"/getting-started/quickstart",permalink:"/nblocks-docs/docs/getting-started/quickstart",draft:!1,tags:[{label:"tutorial",permalink:"/nblocks-docs/docs/tags/tutorial"},{label:"quickstart",permalink:"/nblocks-docs/docs/tags/quickstart"}],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3,sidebar_label:"Quickstart",tags:["tutorial","quickstart"]},sidebar:"tutorialSidebar",previous:{title:"Sign up for Nblocks",permalink:"/nblocks-docs/docs/getting-started/signup"},next:{title:"Accessing your app id and api key",permalink:"/nblocks-docs/docs/getting-started/id-and-keys"}},p={},d=[{value:"Two actions to handle",id:"two-actions-to-handle",level:2},{value:"Step 1: Redirect users to Nblocks login",id:"step-1-redirect-users-to-nblocks-login",level:2},{value:"Add a redirect action",id:"add-a-redirect-action",level:3},{value:"Example code",id:"example-code",level:4},{value:"Step 2: Receive the user back to your app",id:"step-2-receive-the-user-back-to-your-app",level:2},{value:"Add a callback route and use the code to exchange for user tokens",id:"add-a-callback-route-and-use-the-code-to-exchange-for-user-tokens",level:3},{value:"Example code",id:"example-code-1",level:4},{value:"Step 3: Test it",id:"step-3-test-it",level:2},{value:"1. Start your app",id:"1-start-your-app",level:3},{value:"2. Navigate to /login and get redirected to Nblocks Login",id:"2-navigate-to-login-and-get-redirected-to-nblocks-login",level:3},{value:"3. Sign up as a new user and return back to your app",id:"3-sign-up-as-a-new-user-and-return-back-to-your-app",level:3},{value:"Step 4: Exploring the dashboard in Nblocks Admin",id:"step-4-exploring-the-dashboard-in-nblocks-admin",level:2},{value:"Admin Overview:",id:"admin-overview",level:3},{value:"Feature Flags:",id:"feature-flags",level:3},{value:"Workspace and User Management:",id:"workspace-and-user-management",level:3},{value:"Next Steps:",id:"next-steps",level:2},{value:"Related articles",id:"related-articles",level:2}],h={toc:d};function k(e){let{components:t,...l}=e;return(0,o.kt)("wrapper",(0,a.Z)({},h,l,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"quickstart"},"Quickstart"),(0,o.kt)("p",null,"On this page you will integrate your web application with Nblocks to get login, signup, plans and payments functionality for your users out of the box. We call this being user ready and you will accomplish this in no time.\nIn each step you will apply a few lines of code to make redirects using the familiar OpenID Connect / OAuth 2.0 flows to obtain user tokens that will be used to protect your app and make use of our prebuilt fully flexible user portal."),(0,o.kt)("h2",{id:"two-actions-to-handle"},"Two actions to handle"),(0,o.kt)("p",null,"The integration essentially consists of two parts where the first part is where you redirect the user's browser to Nblocks and the second one is where the user is redirected back to your app with profile information."),(0,o.kt)("p",null,"This can be implemented for multiple use cases such as if you have:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"A frontend only"),(0,o.kt)("li",{parentName:"ul"},"A backend only"),(0,o.kt)("li",{parentName:"ul"},"A frontend and a backend in which case we recommend that you implement it in your backend.")),(0,o.kt)("p",null,"After you're done with this part your application will have a login flow with sign in, sign up, and SSO."),(0,o.kt)("p",null,"The Nblocks team provides, maintains, and adds code examples for popular languages continuously.\nHowever, if you have a specific need not covered by this quickstart yet, you'll find documentation on how to use Nblocks with any language in our API reference ",(0,o.kt)("a",{parentName:"p",href:"https://nebulr-group.github.io/nblocks-api-docs"},"API reference"),"."),(0,o.kt)("admonition",{title:"Prerequisites",type:"info"},(0,o.kt)("ol",{parentName:"admonition"},(0,o.kt)("li",{parentName:"ol"},"If you haven't already, ",(0,o.kt)("a",{parentName:"li",href:"/docs/getting-started/signup"},"sign up")," for Nblocks and get access to your ",(0,o.kt)("a",{parentName:"li",href:"/docs/getting-started/id-and-keys"},"app id")," "),(0,o.kt)("li",{parentName:"ol"},"An existing web application that can run on http://localhost:8080."))),(0,o.kt)("details",null,(0,o.kt)("summary",null,"Not using http://localhost:8080?"),(0,o.kt)("p",null,"Nblocks is using sensible defaults to make development and integrations simpler.\nTo use another application address you need to change your app profile configuration."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Using ",(0,o.kt)("a",{parentName:"strong",href:"https://admin.nblocks.cloud"},"Nblocks Admin"))),(0,o.kt)("p",null,"The easiest way to do so is configuring your callback URLs in the ",(0,o.kt)("a",{parentName:"p",href:"/docs/authentication-and-access/authentication-settings"},"authentication settings")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Using the terminal tool")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Step 1. Open ",(0,o.kt)("inlineCode",{parentName:"strong"},"app-configuration.json"),"."),(0,o.kt)("br",{parentName:"p"}),"\n","This json file was downloaded when you signed up for Nblocks through terminal."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Step 2. Change the Oauth 2.0 callback uris."),(0,o.kt)("br",{parentName:"p"}),"\n","In the json file, change the defaultCallbackUri and redirectUris to the correct address for your application."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'"defaultCallbackUri": "http://localhost:3000/auth/oauth-callback",\n"redirectUris": [\n    "http://localhost:3000/auth/oauth-callback"\n],\n')),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Step 3. Save the changes by pushing the updated configuration back to Nblocks")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-console"},"npx @nebulr-group/nblocks-cli push-app\n"))),(0,o.kt)("h2",{id:"step-1-redirect-users-to-nblocks-login"},"Step 1: Redirect users to Nblocks login"),(0,o.kt)("h3",{id:"add-a-redirect-action"},"Add a redirect action"),(0,o.kt)("p",null,'Open your project source code in an editor of your choice.\nThen add an action in your app that will redirect the user to the Nblocks "Login" endpoint at ',(0,o.kt)("inlineCode",{parentName:"p"},"https://auth.nblocks.cloud/url/login/APP_ID")," where ",(0,o.kt)("inlineCode",{parentName:"p"},"APP_ID")," is your known app id."),(0,o.kt)("p",null,"A good practice is to add a new app route ",(0,o.kt)("inlineCode",{parentName:"p"},"/login")," that triggers this action, so that when you navigate to ",(0,o.kt)("inlineCode",{parentName:"p"},"http://localhost:8080/login")," the redirect is performed. Routing common concept and available for most framework."),(0,o.kt)("h4",{id:"example-code"},"Example code"),(0,o.kt)(r.Z,{mdxType:"Tabs"},(0,o.kt)(s.Z,{value:"reactjs",label:"ReactJS",default:!0,mdxType:"TabItem"},(0,o.kt)("p",null,"Create a new component that we call ",(0,o.kt)("inlineCode",{parentName:"p"},"Login")," and add this to the ",(0,o.kt)("inlineCode",{parentName:"p"},"/login")," route. In React routes can be created with ",(0,o.kt)("a",{parentName:"p",href:"https://reactrouter.com/"},"react-router")," plugin."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx"},'import { useEffect } from "react";\n\nexport default function Login() {\n\n  // Replace this with your own APP ID\n  // highlight-start\n  const APP_ID = "XXX";\n  // highlight-end\n\n  // Immediately redirect the web browser to Nblocks login\n  window.location.replace(`https://auth.nblocks.cloud/url/login/${APP_ID}`);\n  return ("");\n}\n'))),(0,o.kt)(s.Z,{value:"nextjs",label:"NextJS",default:!0,mdxType:"TabItem"},(0,o.kt)("p",null,"Create a new file ",(0,o.kt)("inlineCode",{parentName:"p"},"/app/login/page.jsx")," and call this component ",(0,o.kt)("inlineCode",{parentName:"p"},"Login"),". This will add a new route to ",(0,o.kt)("inlineCode",{parentName:"p"},"/login")," by the framework."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx",metastring:"title=/app/login/page.jsx",title:"/app/login/page.jsx"},"import { redirect } from 'next/navigation'\n \nexport default function Login() {\n\n  // Replace this with your own APP ID\n  // highlight-start\n  const APP_ID = \"XXX\";\n  // highlight-end\n\n  // Immediately redirect the web browser to Nblocks login\n  redirect(`https://auth.nblocks.cloud/url/login/${APP_ID}`);\n}\n"))),(0,o.kt)(s.Z,{value:"angular",label:"Angular",default:!0,mdxType:"TabItem"},(0,o.kt)("p",null,"Create a new component that we call ",(0,o.kt)("inlineCode",{parentName:"p"},"Login")," and add this to the ",(0,o.kt)("inlineCode",{parentName:"p"},"/login")," route. In Angular routes can be created with the built in ",(0,o.kt)("strong",{parentName:"p"},"RouterModule"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"@Component({\n  template: '',\n})\nexport class Login {\n  constructor(\n  ) {\n    // Replace this with your own APP ID\n    // highlight-start\n    const APP_ID = \"XXX\";\n    // highlight-end\n\n    // Immediately redirect the web browser to Nblocks login\n    window.location.replace(`https://auth.nblocks.cloud/url/login/${APP_ID}`);\n  }\n}\n"))),(0,o.kt)(s.Z,{value:"pseudo",label:"Can't find your stack?",default:!0,mdxType:"TabItem"},(0,o.kt)(i.ZP,{mdxType:"PseudoCode"}))),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"Curious in what more ways you can use the  ",(0,o.kt)("inlineCode",{parentName:"p"},"/url/login")," endpoint? See the ",(0,o.kt)("a",{parentName:"p",href:"https://nebulr-group.github.io/nblocks-api-docs/#short-hand-authorize"},"API reference"))),(0,o.kt)("h2",{id:"step-2-receive-the-user-back-to-your-app"},"Step 2: Receive the user back to your app"),(0,o.kt)("p",null,"When the user completes authentication with Nblocks Login, the user is redirected back to your app with a code token that we will resolve into something more useful.\nThe URL containing the code token will look like this: ",(0,o.kt)("inlineCode",{parentName:"p"},"http://localhost:8080/auth/oauth-callback?code=XXXXXX....")),(0,o.kt)("h3",{id:"add-a-callback-route-and-use-the-code-to-exchange-for-user-tokens"},"Add a callback route and use the code to exchange for user tokens"),(0,o.kt)("p",null,"Add a new route ",(0,o.kt)("inlineCode",{parentName:"p"},"/auth/oauth-callback")," in your app that will act as a handler when the user is returned. In this handler you should retrieve the code token from the URL mentioned above and save it."),(0,o.kt)("p",null,'Then we will exchange this code token it for more useful user profile information.\nYour app should make an API call to the Nblocks "Token" endpoint at ',(0,o.kt)("inlineCode",{parentName:"p"},"https://auth.nblocks.cloud/token/code/APP_ID")," where ",(0,o.kt)("inlineCode",{parentName:"p"},"APP_ID")," is your known app id in order to make this exchange.\nThe returning response contains secure token data in JWT format that we'll verify cryptographically usign public keys."),(0,o.kt)("admonition",{title:"Decoding and verifying JWTs",type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"JWTs is a well known concept in security. That means there are plenty of libraries for many software stacks to decode and verify them into readable JSON. Here's a extensive ",(0,o.kt)("a",{parentName:"p",href:"https://jwt.io/libraries"},"list")," of different libraries.\nWe'll be using one of these in our code examples.")),(0,o.kt)("h4",{id:"example-code-1"},"Example code"),(0,o.kt)(r.Z,{mdxType:"Tabs"},(0,o.kt)(s.Z,{value:"reactjs",label:"ReactJS",default:!0,mdxType:"TabItem"},(0,o.kt)("p",null,"Create a new component that we call ",(0,o.kt)("inlineCode",{parentName:"p"},"Callback")," and add this to the ",(0,o.kt)("inlineCode",{parentName:"p"},"/auth/oauth-callback")," route. In React routes can be created with ",(0,o.kt)("a",{parentName:"p",href:"https://reactrouter.com/"},"react-router")," plugin."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},'import React, { useEffect, useState } from "react";\nimport { Navigate, useLocation } from \'react-router-dom\';\nimport { jwtVerify, createRemoteJWKSet } from "jose";\n\n// Users will get back to this component after finishing login\nexport default function Callback() {\n\n  // Replace this with your own APP ID\n  // highlight-start\n  const APP_ID = "XXX";\n  // highlight-end\n\n  const location = useLocation();\n  const [accessToken, setAccessToken] = useState();\n\n  useEffect(() => {\n    const code = new URLSearchParams(location.search).get("code");\n    if (code) {\n      handleCallback(code);\n    }\n  }, []);\n\n  const handleCallback = async (code) => {\n    // Get tokens\n    const tokens = await fetch(`https://auth.nblocks.cloud/token/code/${APP_ID}`,\n      {\n        method: "POST", headers: { "Content-Type": "application/json", },\n        body: JSON.stringify({ code }),\n      }\n    ).then(res => res.json());\n\n    // Verify the tokens result using public keys from Nblocks JWKS\n    const { access_token, refresh_token, id_token } = tokens;\n    const { payload } = await jwtVerify(\n      access_token, createRemoteJWKSet(\n          new URL(\'https://auth.nblocks.cloud/.well-known/jwks.json\')\n      ), { issuer: \'https://auth.nblocks.cloud\' }\n    );\n\n    // Store the result in component state and localstorage\n    window.localStorage.setItem(\'access_token\', access_token);\n    window.localStorage.setItem(\'refresh_token\', refresh_token);\n    window.localStorage.setItem(\'id_token\', id_token);\n    setAccessToken(payload);\n    console.log("User access token", payload);\n  };\n\n  if (accessToken)\n      return (<Navigate to={"/"}/>);\n  else\n    return (<p>Not logged in</p>);\n}\n'))),(0,o.kt)(s.Z,{value:"nextjs",label:"NextJS",default:!0,mdxType:"TabItem"},(0,o.kt)("p",null,"Create a new file ",(0,o.kt)("inlineCode",{parentName:"p"},"/app/auth/oauth-callback/page.jsx")," and call this component ",(0,o.kt)("inlineCode",{parentName:"p"},"Callback"),". This will add a new route to ",(0,o.kt)("inlineCode",{parentName:"p"},"/auth/oauth-callback")," by the framework."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx",metastring:"title=/app/auth/oauth-callback/page.jsx",title:"/app/auth/oauth-callback/page.jsx"},'\'use client\'\n\nimport { useSearchParams, redirect } from "next/navigation";\nimport { useEffect, useState } from "react";\nimport { jwtVerify, createRemoteJWKSet } from "jose";\n\n// Users will get back to this component after finishing login\nexport default function Callback() {\n\n  // Replace this with your own APP ID\n  // highlight-start\n  const APP_ID = "XXX";\n  // highlight-end\n\n  const searchParams = useSearchParams();\n  const [accessToken, setAccessToken] = useState();\n\n  useEffect(() => {\n    const code = searchParams.get(\'code\');\n    if (code) {\n      handleCallback(code);\n    }\n  }, [searchParams]);\n\n  const handleCallback = async (code) => {\n    // Get tokens\n    const tokens = await fetch(`https://auth.nblocks.cloud/token/code/${APP_ID}`,\n      {\n        method: "POST", headers: { "Content-Type": "application/json", },\n        body: JSON.stringify({ code }),\n      }\n    ).then(res => res.json());\n\n    // Verify the tokens result using public keys from Nblocks JWKS\n    const { access_token, refresh_token, id_token } = tokens;\n    const { payload } = await jwtVerify(\n      access_token, createRemoteJWKSet(\n          new URL(\'https://auth.nblocks.cloud/.well-known/jwks.json\')\n      ), { issuer: \'https://auth.nblocks.cloud\' }\n    );\n\n    // Store the result in component state and localstorage\n    window.localStorage.setItem(\'access_token\', access_token);\n    window.localStorage.setItem(\'refresh_token\', refresh_token);\n    window.localStorage.setItem(\'id_token\', id_token);\n    setAccessToken(payload);\n    console.log("User access token", payload);\n  };\n\n  if (accessToken)\n      redirect("/");\n  else\n    return (<p>Not logged in</p>);\n}\n'))),(0,o.kt)(s.Z,{value:"angular",label:"Angular",default:!0,mdxType:"TabItem"},(0,o.kt)("p",null,"Create a new component that we call ",(0,o.kt)("inlineCode",{parentName:"p"},"Callback")," and add this to the ",(0,o.kt)("inlineCode",{parentName:"p"},"/auth/")," route. In Angular routes can be created with the built in ",(0,o.kt)("strong",{parentName:"p"},"RouterModule"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"import { jwtVerify, createRemoteJWKSet } from 'jose';\nimport { ActivatedRoute } from '@angular/router';\nimport { HttpClient } from '@angular/common/http';\nimport { Component } from '@angular/core';\n\n@Component({\n  template: '<div>Logging in...</div>',\n})\nexport class Callback {\n  // Replace this with your own APP ID\n  // highlight-start\n  const APP_ID = \"XXX\";\n  // highlight-end\n\n  private accessToken: any;\n\n  constructor(private activatedRoute: ActivatedRoute, private http: HttpClient) {\n    const code = this.activatedRoute.queryParams['code'];\n    if (code) {\n      this.handleCallback(this.activatedRoute.queryParams['code']);\n    }\n  }\n\n  private handleCallback(code: string) {\n    // Get tokens\n    this.http\n      .post(`https://auth.nblocks.cloud/token/code/${this.APP_ID}`, {\n        code: code,\n      })\n      .subscribe(async (tokens: any) => {\n        // Verify the tokens result using public keys from Nblocks JWKS\n        const { access_token, refresh_token, id_token } = tokens;\n        const { payload } = await jwtVerify(\n          access_token,\n          createRemoteJWKSet(\n            new URL('https://auth.nblocks.cloud/.well-known/jwks.json')\n          ),\n          { issuer: 'https://auth.nblocks.cloud' }\n        );\n\n        // Store the result in component state and localstorage\n        window.localStorage.setItem('access_token', access_token);\n        window.localStorage.setItem('refresh_token', refresh_token);\n        window.localStorage.setItem('id_token', id_token);\n        this.accessToken = payload;\n        console.log('User access token', payload);\n      });\n  }\n}\n\n"))),(0,o.kt)(s.Z,{value:"pseudo",label:"Can't find your stack?",default:!0,mdxType:"TabItem"},(0,o.kt)(i.ZP,{mdxType:"PseudoCode"}))),(0,o.kt)("details",null,(0,o.kt)("summary",null,"What is included in the tokens response?"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Tokens Response example"),(0,o.kt)("br",{parentName:"p"}),"\n","This is the anatomy of the tokens response."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "token_type": "Bearer", // Token type\n  "expires_in": 3600, // How long the access token is valid (in seconds)\n  "access_token": "eyJhbGciOiJQ...", // The access token\n  "refresh_token": "eyJhbGciOiJQ...", // The refresh token used to generate new access tokens\n  "id_token": "eyJhbGciOiJQ...", // The OpenID token (user profile)\n}\n'))),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"Curious in what more ways you can use the  ",(0,o.kt)("inlineCode",{parentName:"p"},"/token/code")," endpoint? See the ",(0,o.kt)("a",{parentName:"p",href:"https://nebulr-group.github.io/nblocks-api-docs/#shorthand-get-tokens"},"API reference"))),(0,o.kt)("h2",{id:"step-3-test-it"},"Step 3: Test it"),(0,o.kt)("h3",{id:"1-start-your-app"},"1. Start your app"),(0,o.kt)("p",null,"Start your application so that it is accessible on ",(0,o.kt)("a",{parentName:"p",href:"http://localhost:8080"},"http://localhost:8080")),(0,o.kt)("h3",{id:"2-navigate-to-login-and-get-redirected-to-nblocks-login"},"2. Navigate to /login and get redirected to Nblocks Login"),(0,o.kt)("p",null,"Open a browser tab and navigate to your apps' login url ",(0,o.kt)("a",{parentName:"p",href:"http://localhost:8080/login"},"http://localhost:8080/login"),"."),(0,o.kt)("p",null,"Your new code redirects the user to Nblocks Login."),(0,o.kt)("h3",{id:"3-sign-up-as-a-new-user-and-return-back-to-your-app"},"3. Sign up as a new user and return back to your app"),(0,o.kt)("p",null,'Click "Sign up"  button on the bottom of the login screen and you come to the signup screen.'),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Sign up",src:n(7319).Z,width:"3456",height:"1985"})),(0,o.kt)("p",null,"Click to sign up with Google or Microsoft. If you don't have a Google or MS email you can sign up manually, the result will be the same."),(0,o.kt)("p",null,"Straight after sign up you will be presented with the payment screen that asks you to pick one of your app's plans.\n",(0,o.kt)("img",{alt:"Pick a plan",src:n(4091).Z,width:"3456",height:"1990"})),(0,o.kt)("p",null,"After selecting a plan you get redirected back to your application again, to the callback route.\nThe secure code gets exchanged to secure tokens and you're now authenticated.\nOpen the console and you should see user profile information that we're printing from the component."),(0,o.kt)("p",null,"This user and the new workspace is now listed on the ",(0,o.kt)("em",{parentName:"p"},"Workspaces")," page in ",(0,o.kt)("a",{parentName:"p",href:"https://admin.nblocks.cloud"},"Nblocks Admin"),"."),(0,o.kt)("admonition",{title:"Didn't the callback work?",type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"Make sure your application is running on port 8080. That is the most common mistake.\nIf not, check the prerequisites section again to learn how to use another port than 8080.")),(0,o.kt)("h2",{id:"step-4-exploring-the-dashboard-in-nblocks-admin"},"Step 4: Exploring the dashboard in Nblocks Admin"),(0,o.kt)("p",null,"Congratulations! You\u2019ve successfully integrated Nblocks into your app, enabling seamless user authentication and plan selection. Now, let\u2019s dive into the dashboard, where you can further customize and manage your application\u2019s features."),(0,o.kt)("h3",{id:"admin-overview"},"Admin Overview:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Alternative Authentication Methods:")," Choose from a variety of authentication options, including social logins and two-factor authentication, to enhance security and user convenience."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Payment Method Setup:")," Easily integrate your preferred payment methods to streamline the billing process."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"User Role Management:")," Define and manage user roles, tailoring access and permissions to fit your application\u2019s needs."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Branding Customization:")," Adjust the look and feel of your login and signup flows from the Branding tab to align with your app\u2019s aesthetic.")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Nblocks Admin overview",src:n(3253).Z,width:"3456",height:"1726"})),(0,o.kt)("h3",{id:"feature-flags"},"Feature Flags:"),(0,o.kt)("p",null,"One of the most powerful tools in your arsenal, feature flags, allows you to control feature access based on payment plans, user roles, or even specific users or workspaces.\nLearn how to get started with feature flags ",(0,o.kt)("a",{parentName:"p",href:"/docs/feature-flags/quickstart-feature-flags"},"here"),"."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Nblocks Admin overview",src:n(6853).Z,width:"2808",height:"1068"})),(0,o.kt)("h3",{id:"workspace-and-user-management"},"Workspace and User Management:"),(0,o.kt)("p",null,"Get a comprehensive view of all Workspaces and the users within each, enabling efficient management and oversight."),(0,o.kt)("h2",{id:"next-steps"},"Next Steps:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Explore each section of the dashboard to familiarize yourself with its capabilities."),(0,o.kt)("li",{parentName:"ul"},"Experiment with different settings to find what works best for your application.")),(0,o.kt)("p",null,"If you need help or have questions, connect to us via our ",(0,o.kt)("a",{parentName:"p",href:"mailto:support@nblocks.dev"},"support")," and ",(0,o.kt)("a",{parentName:"p",href:"https://discord.gg/kjWYdZ6f6G"},"community forum"),"."),(0,o.kt)("p",null,"We\u2019re excited to see how you leverage Nblocks to enhance your application. If you have any feedback or suggestions, please let us know!"),(0,o.kt)("p",null,"That concludes this quickstart. You have just added all these capabilities with only two app routes and you signed up as a new user."),(0,o.kt)("h2",{id:"related-articles"},"Related articles"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Add ",(0,o.kt)("a",{parentName:"li",href:"/docs/feature-flags/quickstart-feature-flags"},"feature flags")," to conditionally show and hide content to your users."),(0,o.kt)("li",{parentName:"ul"},"Fine tune how users can login and sign up via ",(0,o.kt)("a",{parentName:"li",href:"/docs/authentication-and-access/authentication-settings"},"authentication settings"),"."),(0,o.kt)("li",{parentName:"ul"},"See best practices on how to use tokens to protect your ",(0,o.kt)("a",{parentName:"li",href:"/docs/authentication-and-access/protect-frontend"},"frontend")," or ",(0,o.kt)("a",{parentName:"li",href:"/docs/authentication-and-access/protect-backend"},"backend"),"."),(0,o.kt)("li",{parentName:"ul"},"Customize the appearance with ",(0,o.kt)("a",{parentName:"li",href:"/docs/branding/quickstart-branding"},"branding"),".")))}k.isMDXComponent=!0},8669:(e,t,n)=>{n.d(t,{ZP:()=>s});var a=n(7462),o=(n(7294),n(3905));const r={toc:[]};function s(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,a.Z)({},r,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"\nIf you cannot find your stack in the example code you need to integrate this part manually.\n\nNblocks can be integrated with any stack or framework. \nEssentially it's all about REST API calls or redirecting the user browser agent which is documented in more details in the API reference https://nebulr-group.github.io/nblocks-api-docs.\n\nUse the other code examples to understand what should to be done and in what order.\n\nWe'd be happy to get feedback so we can add more code examples so don't forget to make a request, by joining our Discord https://discord.gg/kjWYdZ6f6G and spell it out.\n\n")))}s.isMDXComponent=!0},3253:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/nblocks-admin-overview-31bbb5b211edae9eacf2fe34d30c34c9.gif"},6853:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/feature-flags-overview-142bff948bbadf4212a18ed682b3932d.png"},7319:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/signup-screen-4fb4a2b5f7270be8c9be1c44e5f8bb15.png"},4091:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/select-plan-screen-6c9a9e04731122b9699990ad352e2c71.png"}}]);